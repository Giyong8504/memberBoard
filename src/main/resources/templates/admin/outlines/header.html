<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<header th:fragment="header">
    <nev class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a href="/admin/index" class="btn btn-primary">관리자메인</a>
            <!-- 로그인하지 않았을 경우 노출 / 로그인 후 사라짐-->
            <div class="" sec:authorize="isAnonymous()">
                <button type="button" class="" onclick="location.href='/login'">로그인</button>
            </div>
            <div sec:authorize="isAuthenticated()">
                <!-- 로그인 중인 관리자 아이디 표시 -->
                <div>
                    <!-- OAuth2로 인증되어 있을 때만 아래 내용이 노출됨 -->
                    <span th:if="${#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)}"
                          th:text="|관리자 ${#authentication.principal.attributes.email}님 환영합니다.|"></span>

                    <!-- 일반 회원가입 사용자일 때 -->
                    <span th:unless="${#authentication instanceof T(org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken)}"
                          th:text="|관리자 ${#authentication.principal.username}님 환영합니다.|"></span>
                </div>
                <button type="button" id="logout-btn" class="" onclick="location.href='/logout'">로그아웃</button>
            </div>
        </div>
    </nev>
    <hr/>
</header>
</html>